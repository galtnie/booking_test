(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{126:function(e,t,a){e.exports=a(309)},131:function(e,t,a){},132:function(e,t,a){},214:function(e,t,a){},264:function(e,t,a){},265:function(e,t,a){},308:function(e,t,a){},309:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(25),o=a.n(i),s=(a(131),a(26)),l=a(34),c=a(5),u=a(6),d=a(8),h=a(7),m=a(9),p=a(21),f=a(52),g=a.n(f),v=a(53),y=a.n(v),b=a(27),w=a.n(b),E=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={dateInput:""},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"dateLimit",value:function(){var e=new Date,t=e.getDate();return e.setDate(t),e.toISOString().split("T")[0]}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"ui input",style:{paddingRight:"1em",display:"flex",flexDirection:"row",justifyContent:"center"}},r.a.createElement("input",{type:"date",min:this.dateLimit(),value:this.props.dateInput,onChange:function(t){return e.props.controlDateInput(t.target.value)},style:{padding:0,lineHeight:"1em",background:"#FBFBFF"}}),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",paddingLeft:"0.5em"}},r.a.createElement("i",{className:"search icon ",style:{color:"#FBFBFF",cursor:"pointer"},onClick:function(){e.props.handleDateInput()}})))}}]),t}(n.Component),S=(a(132),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(g.a,{position:"static"},r.a.createElement(y.a,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingTop:"1em",paddingBottom:"1em",flexWrap:"wrap",alignContent:"flex-start",width:"100%"}},r.a.createElement(E,{handleDateInput:this.props.handleDateInput,dateInput:this.props.dateInput,controlDateInput:this.props.controlDateInput}),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",fontFamily:"sans-serif",fontSize:"1em"}},r.a.createElement("i",{className:"".concat(this.props.back,"-previous-day big caret left icon"),style:{width:"0.6em"},onClick:function(t){"inactive"===e.props.back?t.preventDefault():e.props.handleDayChange(!1)}}),r.a.createElement("div",{style:{fontFamily:"sans-serif",fontSize:"1.3em"}},this.props.date),r.a.createElement("i",{className:"next-day big caret right icon",style:{width:"0.6em"},onClick:function(){e.props.handleDayChange(!0)}})),r.a.createElement("div",null,r.a.createElement(s.b,{to:"/signup"},r.a.createElement(w.a,{className:t.loginButton},"Sign up")),r.a.createElement(s.b,{to:"/login"},r.a.createElement(w.a,{className:t.loginButton,style:{color:"#15cda8",fontWeight:"bold",marginLeft:"0.5em",border:"solid 0.25em #15cda8"}},"Sign in"))))))}}]),t}(n.Component)),k=Object(p.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},loginButton:{color:"#FBFBFF",cursor:"pointer"}})(S),D=(a(99),a(214),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"red-room-free-home",id:this.props.id},"F")}}]),t}(n.Component)),O=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"blue-room-free-home",id:this.props.id},"F")}}]),t}(n.Component),C=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"green-room-free-home",id:this.props.id},"F")}}]),t}(n.Component),j=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"violet-room-free-home",id:this.props.id},"F")}}]),t}(n.Component),I=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"brown-room-free-home",id:this.props.id},"F")}}]),t}(n.Component),T=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"red-room-reserved",id:this.props.id,"data-tooltip":this.props.id?this.props.id.slice(34):null},"R")}}]),t}(n.Component),R=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"blue-room-reserved",id:this.props.id,"data-tooltip":this.props.id?this.props.id.slice(34):null},"R")}}]),t}(n.Component),x=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"green-room-reserved",id:this.props.id,"data-tooltip":this.props.id?this.props.id.slice(34):null},"R")}}]),t}(n.Component),N=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"violet-room-reserved",id:this.props.id,"data-tooltip":this.props.id?this.props.id.slice(34):null},"R")}}]),t}(n.Component),F=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"brown-room-reserved",id:this.props.id,"data-tooltip":this.props.id?this.props.id.slice(34):null},"R")}}]),t}(n.Component),L=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"red-room-free",id:this.props.id,onClick:function(){e.props.chooseSlot(e.props.id)}},"F")}}]),t}(n.Component),A=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"blue-room-free",id:this.props.id,onClick:function(){e.props.chooseSlot(e.props.id)}},"F")}}]),t}(n.Component),M=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"green-room-free",id:this.props.id,onClick:function(){e.props.chooseSlot(e.props.id)}},"F")}}]),t}(n.Component),H=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"violet-room-free",id:this.props.id,onClick:function(){e.props.chooseSlot(e.props.id)}},"F")}}]),t}(n.Component),B=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"brown-room-free",id:this.props.id,onClick:function(){e.props.chooseSlot(e.props.id)}},"F")}}]),t}(n.Component),_=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"red-room-chosen",id:this.props.id,onClick:function(){e.props.deselect(e.props.id)}},"S")}}]),t}(n.Component),P=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"blue-room-chosen",id:this.props.id,onClick:function(){e.props.deselect(e.props.id)}},"S")}}]),t}(n.Component),z=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"green-room-chosen",id:this.props.id,onClick:function(){e.props.deselect(e.props.id)}},"S")}}]),t}(n.Component),W=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"violet-room-chosen",id:this.props.id,onClick:function(){e.props.deselect(e.props.id)}},"S")}}]),t}(n.Component),Y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"brown-room-chosen",id:this.props.id,onClick:function(){e.props.deselect(e.props.id)}},"S")}}]),t}(n.Component),G=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"renderHour",value:function(e){return r.a.createElement("div",{style:{paddingLeft:"0.38em"}},e,'"')}},{key:"renderRooms",value:function(e,t,a){switch(a){case"red":return this.props.checkReservation(e+t+"colour:red")?r.a.createElement(T,{id:e+t+"colour:red"+this.props.checkReservation(e+t+"colour:red")}):r.a.createElement(D,{id:e+t+"colour:red",chooseSlot:this.props.chooseSlot});case"blue":return this.props.checkReservation(e+t+"colour:blu")?r.a.createElement(R,{id:e+t+"colour:blu"+this.props.checkReservation(e+t+"colour:blu")}):r.a.createElement(O,{id:e+t+"colour:blu",chooseSlot:this.props.chooseSlot});case"green":return this.props.checkReservation(e+t+"colour:gre")?r.a.createElement(x,{id:e+t+"colour:gre"+this.props.checkReservation(e+t+"colour:gre")}):r.a.createElement(C,{id:e+t+"colour:gre",chooseSlot:this.props.chooseSlot});case"violet":return this.props.checkReservation(e+t+"colour:vio")?r.a.createElement(N,{id:e+t+"colour:vio"+this.props.checkReservation(e+t+"colour:vio")}):r.a.createElement(j,{id:e+t+"colour:vio",chooseSlot:this.props.chooseSlot});case"brown":return this.props.checkReservation(e+t+"colour:bro")?r.a.createElement(F,{id:e+t+"colour:bro"+this.props.checkReservation(e+t+"colour:bro")}):r.a.createElement(I,{id:e+t+"colour:bro",chooseSlot:this.props.chooseSlot});default:return"Slot"}}},{key:"renderOneHourContainer",value:function(){for(var e=[],t=0;t<=23;t++){var a=1===String(t).length?"hour:0"+t:"hour:"+t;e.push(r.a.createElement("div",{id:this.props.id+a,key:"".concat(this.id).concat(a),className:"home-one-hour-countainer"},this.renderHour(t),r.a.createElement("div",null,this.renderRooms(this.props.id,a,"brown")),r.a.createElement("div",null,this.renderRooms(this.props.id,a,"green")),r.a.createElement("div",null,this.renderRooms(this.props.id,a,"red")),r.a.createElement("div",null,this.renderRooms(this.props.id,a,"blue")),r.a.createElement("div",null,this.renderRooms(this.props.id,a,"violet"))))}return e}},{key:"render",value:function(){return r.a.createElement("div",{id:this.props.id,style:{marginTop:"2em",marginBottom:"2em"}},r.a.createElement("div",{className:"home-hours-card"},this.renderOneHourContainer()))}}]),t}(n.PureComponent),V=(a(70),a(22)),U=a.n(V),J=a(119),q=a.n(J);var Q=Object(p.withStyles)(function(e){return{progress:{margin:2*e.spacing.unit}}})(function(e){var t=e.classes;return r.a.createElement("div",null,r.a.createElement(q.a,{className:t.progress}))}),X=a(120),$=a.n(X),K=a(121),Z=a.n(K),ee=a(122),te=a.n(ee),ae=a(75),ne=a.n(ae),re=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={expanded:!1},a.handleExpandClick=function(){a.setState(function(e){return{expanded:!e.expanded}})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement($.a,{className:[e.card,this.props.cssClass].join(" ")},r.a.createElement("div",{style:{height:"6em",display:"Flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"1em"},className:this.props.cssClass},r.a.createElement("div",null,r.a.createElement("h3",null,this.props.title))),r.a.createElement(Z.a,{className:e.media,image:this.props.image}),r.a.createElement(te.a,{className:this.props.cssClass},this.props.description))}}]),t}(r.a.Component),ie=Object(p.withStyles)(function(e){return{card:{maxWidth:400,margin:"0.2em"},media:{height:0,paddingTop:"56.25%"},actions:{display:"flex"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:ne.a[500]}}})(re),oe={main:{display:"flex",flexDirection:"column",justifyContent:"flex-start"},title:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",color:"#7D6B91",paddingTop:"2em",paddingBottom:"1em",marginLeft:"0.5em",marginRight:"0.5em"}},se=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={myClasses:oe,dayCardsID:"initial",reservedSlots:[],halls:[],colours:["bro","gre","red","blu","vio"],displayDayCards:!1,dayChosen:new Date,backwardClick:"inactive",dateInput:"",tickets:[]},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"calculateDate",value:function(e,t){var a=e.getDate()+t;e.setDate(a);var n=e,r=e.getDate(),i=new Intl.DateTimeFormat("en-GB",{month:"long"}).format(e),o=new Intl.DateTimeFormat("en-GB",{weekday:"long"}).format(e),s=2===r.toString().length?r:"0"+r,l=2===(e.getMonth()+1).toString().length?e.getMonth()+1:"0"+(e.getMonth()+1),c=e.getYear().toString().slice(1);return{dateObject:n,date:"".concat(r," ").concat(i,", ").concat(o),key:"".concat(s).concat(l).concat(c)}}},{key:"checkReservation",value:function(e){var t=this.state.reservedSlots.map(function(e){return e.slice(0,28)}),a=this.state.reservedSlots.map(function(e){return e.slice(28)});return!!t.includes(e)&&a[t.findIndex(function(t){return t===e})]}},{key:"initialRenderDayCard",value:function(){var e=this.state.dayChosen,t=this.calculateDate(e,0),a=t.date,n=t.key;return{card:r.a.createElement(G,{date:a,id:"date:"+n,reservedSlots:this.state.reservedSlots,checkReservation:this.checkReservation.bind(this)}),date:a}}},{key:"renderDayCard",value:function(e){var t=this;if("forth"===e)return this.setState({backwardClick:"active"}),new Promise(function(e){e()}).then(function(){return t.calculateDate(t.state.dayChosen,1)}).then(function(){return t.calculateSlotsReserved()});if("back"===e){var a=new Date;return new Promise(function(e){e()}).then(function(){return t.calculateDate(t.state.dayChosen,-1)}).then(function(){return t.calculateSlotsReserved()}).then(function(){t.state.dayChosen.getDate()===a.getDate()&&(t.setState({backwardClick:"inactive"}),t.forceUpdate())})}}},{key:"addingHoursIntoReservation",value:function(e,t,a,n){var r=e.getDate(),i=2===r.toString().length?r:"0"+r,o=2===(e.getMonth()+1).toString().length?e.getMonth()+1:"0"+(e.getMonth()+1),s=e.getYear().toString().slice(1),l=e.getHours(),c=1===String(l).length?"0"+l:l,u=this.state.halls.map(function(e){return e._id}).indexOf(a),d="date:".concat(i).concat(o).concat(s,"hour:").concat(c,"colour:").concat(this.state.colours[u],"title:").concat(n),h=this.state.reservedSlots.slice();if(h.push(d),this.setState({reservedSlots:h}),e.getHours()<t.getHours()){var m=new Date(e.setTime(e.getTime()+36e5));this.addingHoursIntoReservation(m,t,a,n)}}},{key:"addingDaysIntoReservation",value:function(e,t,a,n){if(e<t&&(e.getDate()!==t.getDate()||e.getMonth()!==t.getMonth()||e.getYear()!==t.getYear())){var r=new Date(e.getTime());r=new Date(r.setHours(23)),this.addingHoursIntoReservation(e,r,a,n);var i=this.calculateDate(e,1).dateObject;i=new Date(i.setHours(0)),this.addingDaysIntoReservation(i,t,a,n)}else this.addingHoursIntoReservation(e,t,a,n)}},{key:"calculateSlotsReserved",value:function(){for(var e=0;e<this.state.tickets.length;e++){var t=new Date(this.state.tickets[e].from),a=new Date(this.state.tickets[e].to),n=this.state.tickets[e].title;if(!(a<new Date)&&(t!==a&&t<a)){t=new Date(new Date(new Date(t.setMilliseconds(0)).setSeconds(0)).setMinutes(0)),a=new Date(new Date(new Date(a.setMilliseconds(0)).setSeconds(0)).setMinutes(0));var r=new Date(new Date(new Date(new Date(this.state.dayChosen).setHours(0)).setMinutes(0)).setSeconds(0)).setMilliseconds(0)-5,i=new Date(new Date(new Date(new Date(this.state.dayChosen).setHours(23)).setMinutes(59)).setSeconds(59)).setMilliseconds(999)+5;(t<=r&&a>=r||t>=r&&a<=i||t<=i&&a>=i)&&this.addingDaysIntoReservation(t,a,this.state.tickets[e].hall_id,n)}}}},{key:"handleDateInput",value:function(){var e=this,t=new Date(new Date(new Date(new Date((new Date).setHours(0)).setMinutes(0)).setSeconds(0)).setMilliseconds(0)),a=new Date(this.state.dateInput);if(a<t)alert("The searched date cannot be erenow "),this.setState({dateInput:""});else{if(a.getDate()===t.getDate())return this.setState({backwardClick:"inactive"}),new Promise(function(e){e(a)}).then(function(t){return e.setState({dayChosen:t})}).then(function(){return e.calculateSlotsReserved()});if(a>t)return this.setState({backwardClick:"active"}),new Promise(function(e){e(a)}).then(function(t){return e.setState({dayChosen:t})}).then(function(){return e.calculateSlotsReserved()})}}},{key:"controlDateInput",value:function(e){this.setState({dateInput:e})}},{key:"handleDayChange",value:function(e){this.setState({dateInput:""}),e?this.renderDayCard("forth"):this.renderDayCard("back")}},{key:"componentDidMount",value:function(){var e=this;U.a.get("http://ec2-35-175-143-145.compute-1.amazonaws.com:4000/halls").then(function(t){return e.setState({halls:t.data.halls})}).catch(function(e){return console.log(e)}),U.a.get("http://ec2-35-175-143-145.compute-1.amazonaws.com:4000/tickets").then(function(t){return e.setState({tickets:t.data})}).then(function(){e.calculateSlotsReserved(),e.setState({displayDayCards:!0})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return console.log("render"),"string"!==typeof sessionStorage.getItem("LoggedIn")?r.a.createElement("div",{className:this.state.myClasses.main},r.a.createElement(k,{date:this.initialRenderDayCard().date,handleDateInput:this.handleDateInput.bind(this),handleDayChange:this.handleDayChange.bind(this),dateInput:this.state.dateInput,back:this.state.backwardClick,controlDateInput:this.controlDateInput.bind(this)}),r.a.createElement("div",{style:this.state.myClasses.title},r.a.createElement("div",null,r.a.createElement("h1",{className:"ui header",style:{color:"inherit"}},"Conference Venue Booking"))),r.a.createElement("div",{className:"manual"},r.a.createElement("div",null,r.a.createElement("p",{className:"manual-par"},"Only ",r.a.createElement("b",null,"logged in users")," can ",r.a.createElement("b",null,"make reservations"),"."),r.a.createElement("p",{className:"manual-par"},r.a.createElement("b",null,'9"')," means ",r.a.createElement("b",null,"9:00-10:00"),'; 10" means 10:00-11:00.')),r.a.createElement("div",null,r.a.createElement("div",{className:"manual-div"},r.a.createElement(L,null),r.a.createElement("span",{className:"manual-par"},"The red room is ",r.a.createElement("b",null,"free")," at this time")),r.a.createElement("div",{className:"manual-div"},r.a.createElement(T,null),r.a.createElement("span",{className:"manual-par"},"The red room is ",r.a.createElement("b",null," reserved ")," at this time")))),this.state.displayDayCards?this.initialRenderDayCard().card:r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",paddingTop:"3em"}},r.a.createElement(Q,null)),this.state.halls.length>0?r.a.createElement("div",{style:{display:"flex",flexDirection:"row",flexFlow:"wrap",justifyConter:"space-between"}},this.state.halls.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(ie,{image:t.imageURL,title:t.title,description:t.description,cssClass:"".concat(e.state.colours[a],"-hall")}))})):r.a.createElement("div",null," ")):r.a.createElement(l.a,{to:"/booking"})}}]),t}(n.Component),le=a(54),ce=a(123),ue=a.n(ce),de=a(55),he=a.n(de),me=a(56),pe=a.n(me),fe=a(125),ge=a.n(fe),ve=a(58),ye=a.n(ve),be=a(39),we=a.n(be),Ee=a(57),Se=a.n(Ee),ke=a(124),De=a.n(ke),Oe=a(33),Ce=a.n(Oe),je=a(76),Ie=a.n(je),Te=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={loginInputted:"",passInputted:"",errorDisplay:"none",loginDetailsList:""},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"getInsideBooking",value:function(e,t,a){this.setState({loginInputted:""}),this.setState({passInputted:""}),sessionStorage.setItem("LoggedIn",e),sessionStorage.setItem("user_id",t),sessionStorage.setItem("token",a),this.props.history.push("/booking")}},{key:"checkLoginDetails",value:function(){var e=this;U.a.post("http://ec2-35-175-143-145.compute-1.amazonaws.com:4000/signIn",{headers:{"Content-Type":"application/x-www-form-urlencoded"}},{data:{email:this.state.loginInputted,password:this.state.passInputted}}).then(function(t){e.getInsideBooking(e.state.loginInputted.toLocaleLowerCase(),t.data._id,t.data.token)}).catch(function(t){"Request failed with status code 401"===t.message&&(e.setState({errorDisplay:"flex"}),setTimeout(function(){e.setState({errorDisplay:"none"})},3e3))})}},{key:"render",value:function(){var e=this,t=this.props.classes;return sessionStorage.getItem("user_id")?r.a.createElement(l.a,{to:"/booking"}):r.a.createElement("main",{className:t.main},r.a.createElement(he.a,null),r.a.createElement(Ce.a,{className:t.paper},r.a.createElement(ue.a,{className:t.avatar},r.a.createElement(De.a,null)),r.a.createElement(Ie.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form},r.a.createElement(pe.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(Se.a,{htmlFor:"email"},"Email Address"),r.a.createElement(we.a,{id:"email",name:"email",autoComplete:"email",autoFocus:!0,value:this.state.loginInputted,onChange:function(t){e.setState({loginInputted:t.target.value}),e.setState({errorDisplay:"none"})}})),r.a.createElement(pe.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(Se.a,{htmlFor:"password"},"Password"),r.a.createElement(we.a,{name:"password",type:"password",id:"password",autoComplete:"current-password",onChange:function(t){e.setState({passInput:t.target}),e.setState({passInputted:t.target.value}),e.setState({errorDisplay:"none"})}})),r.a.createElement(ge.a,{control:r.a.createElement(ye.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:0,padding:0,height:"1em"}},r.a.createElement("div",{style:{color:"red",display:this.state.errorDisplay}}," The login or password is wrong. ")),r.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(t){t.preventDefault(),e.checkLoginDetails()}},"Sign in")),r.a.createElement(s.b,{to:"/"},r.a.createElement("p",{style:{marginTop:"1.5em",color:"darkblue",textDecoration:"underline"}},"Return to Home page"))))}}]),t}(r.a.Component),Re=Object(p.withStyles)(function(e){return{main:Object(le.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(Te),xe=a(78),Ne=(a(264),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"dateLimit",value:function(){var e=new Date,t=new Date,a=e.getDate()+1;e.setDate(a);var n=t.getDate()+62;return t.setDate(n),{minDate:e.toISOString().split("T")[0],maxDate:t.toISOString().split("T")[0]}}},{key:"signOut",value:function(){sessionStorage.removeItem("LoggedIn"),sessionStorage.removeItem("chosenSlots"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("token"),this.props.history.push("/login")}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(g.a,{position:"static"},r.a.createElement(y.a,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingTop:"1em",paddingBottom:"1em",flexWrap:"wrap",alignContent:"flex-start",width:"100%"}},r.a.createElement(E,{handleDateInput:this.props.handleDateInput,dateInput:this.props.dateInput,controlDateInput:this.props.controlDateInput}),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",fontFamily:"sans-serif",fontSize:"1em"}},r.a.createElement("i",{className:"".concat(this.props.back,"-previous-day big caret left icon"),style:{width:"0.6em"},onClick:function(t){"inactive"===e.props.back?t.preventDefault():e.props.handleDayChange(!1)}}),r.a.createElement("div",{style:{fontFamily:"sans-serif",fontSize:"1.3em"}},this.props.date),r.a.createElement("i",{className:"next-day big caret right icon",style:{width:"0.6em"},onClick:function(){e.props.handleDayChange(!0)}})),r.a.createElement("div",null,r.a.createElement(w.a,{className:t.loginButton,onClick:function(){e.signOut()}},"Log out")))))}}]),t}(n.Component)),Fe=Object(p.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},loginButton:{color:"#FBFBFF",cursor:"pointer"}})(Ne),Le=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={halls:[],tickets:[],colours:["bro","gre","red","blu","vio"]},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"renderHour",value:function(e){return r.a.createElement("div",{style:{paddingLeft:"0.38em"}},e,'"')}},{key:"renderRooms",value:function(e,t,a){switch(a){case"red":return this.props.checkReservation(e+t+"colour:red")?r.a.createElement(T,{id:e+t+"colour:red"+this.props.checkReservation(e+t+"colour:red")}):this.props.checkSlot(e+t+"colour:red")?r.a.createElement(_,{id:e+t+"colour:red",deselect:this.props.deselect}):r.a.createElement(L,{id:e+t+"colour:red",chooseSlot:this.props.chooseSlot});case"blue":return this.props.checkReservation(e+t+"colour:blu")?r.a.createElement(R,{id:e+t+"colour:blu"+this.props.checkReservation(e+t+"colour:blu")}):this.props.checkSlot(e+t+"colour:blu")?r.a.createElement(P,{id:e+t+"colour:blu",deselect:this.props.deselect}):r.a.createElement(A,{id:e+t+"colour:blu",chooseSlot:this.props.chooseSlot});case"green":return this.props.checkReservation(e+t+"colour:gre")?r.a.createElement(x,{id:e+t+"colour:gre"+this.props.checkReservation(e+t+"colour:gre")}):this.props.checkSlot(e+t+"colour:gre")?r.a.createElement(z,{id:e+t+"colour:gre",deselect:this.props.deselect}):r.a.createElement(M,{id:e+t+"colour:gre",chooseSlot:this.props.chooseSlot});case"violet":return this.props.checkReservation(e+t+"colour:vio")?r.a.createElement(N,{id:e+t+"colour:vio"+this.props.checkReservation(e+t+"colour:vio")}):this.props.checkSlot(e+t+"colour:vio")?r.a.createElement(W,{id:e+t+"colour:vio",deselect:this.props.deselect}):r.a.createElement(H,{id:e+t+"colour:vio",chooseSlot:this.props.chooseSlot});case"brown":return this.props.checkReservation(e+t+"colour:bro")?r.a.createElement(F,{id:e+t+"colour:bro"+this.props.checkReservation(e+t+"colour:bro")}):this.props.checkSlot(e+t+"colour:bro")?r.a.createElement(Y,{id:e+t+"colour:bro",deselect:this.props.deselect}):r.a.createElement(B,{id:e+t+"colour:bro",chooseSlot:this.props.chooseSlot});default:return"room"}}},{key:"renderOneHourContainer",value:function(){for(var e=[],t=0;t<=23;t++){var a=1===String(t).length?"hour:0"+t:"hour:"+t;e.push(r.a.createElement("div",{id:this.props.id+a,key:"".concat(this.id).concat(a),className:"home-one-hour-countainer"},this.renderHour(t),r.a.createElement("div",null,this.renderRooms(this.props.id,a,"brown")),r.a.createElement("div",null,this.renderRooms(this.props.id,a,"green")),r.a.createElement("div",null,this.renderRooms(this.props.id,a,"red")),r.a.createElement("div",null,this.renderRooms(this.props.id,a,"blue")),r.a.createElement("div",null,this.renderRooms(this.props.id,a,"violet"))))}return e}},{key:"render",value:function(){return r.a.createElement("div",{id:this.props.id,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",{className:"home-hours-card"},this.renderOneHourContainer(),r.a.createElement(w.a,{variant:"contained",size:"medium",color:"primary",style:{width:"90%",marginTop:"1em"},onClick:this.props.confirm},"Payment")))}}]),t}(n.Component),Ae=(a(265),{main:{display:"flex",flexDirection:"column",justifyContent:"flex-start"},title:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",color:"#7D6B91",paddingTop:"2em",paddingBottom:"1em",marginLeft:"0.5em",marginRight:"0.5em"}}),Me=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={myClasses:Ae,dayCardsID:"initial",chosenSlots:[],reservedSlots:[],halls:[],colours:["bro","gre","red","blu","vio"],displayDayCards:!1,newOrdersListForTickets:"",newOrdersListForRendering:"",priorOrdersListForRendering:"",paymentQuestion:!1,priorOrdersList:[],editReservation:!1,dayChosen:new Date,dateInput:"",backwardClick:"inactive",titleToEdit:"",fromToEdit:"",untilToEdit:"",newTitle:null,newFrom:null,newTo:null,alteredTicketIndex:null},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"chooseSlot",value:function(e){sessionStorage.setItem("chosenSlots",JSON.stringify([].concat(Object(xe.a)(this.state.chosenSlots),[e]))),this.setState({chosenSlots:[].concat(Object(xe.a)(this.state.chosenSlots),[e])})}},{key:"checkSlot",value:function(e){return this.state.chosenSlots.includes(e)}},{key:"deselect",value:function(e){for(var t=this.state.chosenSlots.slice(0),a=0;a<t.length;a++)t[a]===e&&t.splice(a,1);sessionStorage.removeItem("chosenSlots"),sessionStorage.setItem("chosenSlots",JSON.stringify(t)),this.setState({chosenSlots:t})}},{key:"checkReservation",value:function(e){var t=this.state.reservedSlots.map(function(e){return e.slice(0,28)}),a=this.state.reservedSlots.map(function(e){return e.slice(28)});return!!t.includes(e)&&a[t.findIndex(function(t){return t===e})]}},{key:"calculateDate",value:function(e,t){var a=e.getDate()+t;e.setDate(a);var n=e,r=e.getDate(),i=new Intl.DateTimeFormat("en-GB",{month:"long"}).format(e),o=new Intl.DateTimeFormat("en-GB",{weekday:"long"}).format(e),s=2===r.toString().length?r:"0"+r,l=2===(e.getMonth()+1).toString().length?e.getMonth()+1:"0"+(e.getMonth()+1),c=e.getYear().toString().slice(1);return{dateObject:n,date:"".concat(r," ").concat(i,", ").concat(o),key:"".concat(s).concat(l).concat(c)}}},{key:"initialRenderDayCard",value:function(){var e,t,a=this;e=this.state.dayChosen;var n=(t=this.calculateDate(e,0)).date,i=t.key;return{card:r.a.createElement(Le,{date:n,id:"date:"+i,checkReservation:this.checkReservation.bind(this),chooseSlot:this.chooseSlot.bind(this),checkSlot:this.checkSlot.bind(this),deselect:this.deselect.bind(this),setClick:function(e){return a.clickChild=e},confirm:this.confirmReservation.bind(this)}),date:n}}},{key:"renderDayCard",value:function(e){var t=this;if("forth"===e)return this.setState({backwardClick:"active"}),new Promise(function(e){e()}).then(function(){return t.calculateDate(t.state.dayChosen,1)}).then(function(){return t.calculateSlotsReserved()});if("back"===e){var a=new Date;return new Promise(function(e){e()}).then(function(){return t.calculateDate(t.state.dayChosen,-1)}).then(function(){return t.calculateSlotsReserved()}).then(function(){t.state.dayChosen.getDate()===a.getDate()&&(t.setState({backwardClick:"inactive"}),t.forceUpdate())})}}},{key:"convertTimeIntoSlotID",value:function(e){var t=e.getDate(),a=2===t.toString().length?t:"0"+t,n=2===(e.getMonth()+1).toString().length?e.getMonth()+1:"0"+(e.getMonth()+1),r=e.getYear().toString().slice(1),i=e.getHours(),o=1===String(i).length?"0"+i:i;return"date:".concat(a).concat(n).concat(r,"hour:").concat(o)}},{key:"addColourToID",value:function(e){var t=this.state.halls.map(function(e){return e._id}).indexOf(e);return"colour:".concat(this.state.colours[t])}},{key:"addSlotToReservationList",value:function(e,t,a){var n=this.convertTimeIntoSlotID(e)+this.addColourToID(t)+"title:".concat(a),r=this.state.reservedSlots.slice();r.push(n),this.setState({reservedSlots:r})}},{key:"addingHoursIntoReservation",value:function(e,t,a,n){if(this.addSlotToReservationList(e,a,n),e.getHours()<t.getHours()){var r=new Date(e.setTime(e.getTime()+36e5));this.addingHoursIntoReservation(r,t,a,n)}}},{key:"addingDaysIntoReservation",value:function(e,t,a,n){if(e<t&&(e.getDate()!==t.getDate()||e.getMonth()!==t.getMonth()||e.getYear()!==t.getYear())){var r=new Date(e.getTime());r=new Date(r.setHours(23)),this.addingHoursIntoReservation(e,r,a,n);var i=this.calculateDate(e,1).dateObject;i=new Date(i.setHours(0)),this.addingDaysIntoReservation(i,t,a,n)}else this.addingHoursIntoReservation(e,t,a,n)}},{key:"calculateSlotsReserved",value:function(){for(var e=0;e<this.state.tickets.length;e++){var t=new Date(this.state.tickets[e].from),a=new Date(this.state.tickets[e].to),n=this.state.tickets[e].title;if(!(a<new Date)&&(t!==a&&t<a)){t=new Date(new Date(new Date(t.setMilliseconds(0)).setSeconds(0)).setMinutes(0)),a=new Date(new Date(new Date(a.setMilliseconds(0)).setSeconds(0)).setMinutes(0));var r=new Date(new Date(new Date(new Date(this.state.dayChosen).setHours(0)).setMinutes(0)).setSeconds(0)).setMilliseconds(0)-5,i=new Date(new Date(new Date(new Date(this.state.dayChosen).setHours(23)).setMinutes(59)).setSeconds(59)).setMilliseconds(999)+5;(t<=r&&a>=r||t>=r&&a<=i||t<=i&&a>=i)&&this.addingDaysIntoReservation(t,a,this.state.tickets[e].hall_id,n)}}}},{key:"confirmReservation",value:function(){if(null===sessionStorage.getItem("chosenSlots")||0===JSON.parse(sessionStorage.getItem("chosenSlots")).length)alert("There is nothing to confirm. Please choose rooms you like to book first.");else if(JSON.parse(sessionStorage.getItem("chosenSlots").length>0)){var e=JSON.parse(sessionStorage.getItem("chosenSlots"));this.convertSlotIDsToTimeAndHalls(e)}}},{key:"convertSlotIDsToTimeAndHalls",value:function(e){for(var t=[],a=0;a<e.length;a++){var n={hall_id:this.state.halls[this.state.colours.indexOf(e[a].slice(-3))]._id,from:Date.parse("20".concat(e[a].slice(9,11),"-").concat(e[a].slice(7,9),"-").concat(e[a].slice(5,7),"T").concat(e[a].slice(16,18),":00:00")),to:Date.parse("20".concat(e[a].slice(9,11),"-").concat(e[a].slice(7,9),"-").concat(e[a].slice(5,7),"T").concat(e[a].slice(16,18),":59:00"))};t.push(n)}this.uniteTicketsWithSameHallIDs(t)}},{key:"uniteTicketsWithSameHallIDs",value:function(e){for(var t=[],a=0;a<e.length;a++){var n=!0;if(0===t.length){var r=[];r.push(e[a]),t.push(r),n=!1}else for(var i=0;i<t.length;i++)t[i][0].hall_id===e[a].hall_id&&(t[i].push(e[a]),n=!1);if(n){var o=[];o.push(e[a]),t.push(o)}}this.uniteAdjacentTickets(t)}},{key:"uniteAdjacentTickets",value:function(e){var t=!1;if(e.forEach(function(e){for(var a=0;a<e.length;a++)for(var n=0;n<e.length;n++){if(e[n].from-e[a].to<3e5&&e[n].from-e[a].to>0){var r={from:e[a].from,to:e[n].to,hall_id:e[a].hall_id};a>n?(e.splice(a,1),e.splice(n,1,r)):(e.splice(n,1),e.splice(a,1,r)),t=!0;break}if(e[a].from-e[n].to<3e5&&e[a].from-e[n].to>0){var i={from:e[n].from,to:e[a].to,hall_id:e[a].hall_id};a>n?(e.splice(a,1),e.splice(n,1,i)):(e.splice(n,1),e.splice(a,1,i)),t=!0;break}}}),t)this.uniteAdjacentTickets(e);else{var a=[];e.forEach(function(e){return e.forEach(function(e){e.event_title="untitled",a.push(e)})}),this.setState({newOrdersListForTickets:a}),this.convertNewOrdersToRender(a)}}},{key:"convertNewOrdersToRender",value:function(e){for(var t=this,a=[],n={day:"numeric",weekday:"long",year:"numeric",month:"long",hour:"numeric",minute:"numeric"},r=function(r){var i={hall_title:t.state.halls.find(function(t){return t._id===e[r].hall_id}).title,from:new Intl.DateTimeFormat("en-GB",n).format(e[r].from),to:new Intl.DateTimeFormat("en-GB",n).format(e[r].to)};a.push(i)},i=0;i<e.length;i++)r(i);this.setState({newOrdersListForRendering:a}),this.setState({paymentQuestion:!0})}},{key:"convertPriorOrdersToRender",value:function(e){for(var t=this,a=[],n={day:"numeric",weekday:"long",year:"numeric",month:"long",hour:"numeric",minute:"numeric"},r=function(r){var i={hall_title:t.state.halls.find(function(t){return t._id===e[r].hall_id}).title,from:new Intl.DateTimeFormat("en-GB",n).format(e[r].from),to:new Intl.DateTimeFormat("en-GB",n).format(e[r].to),event:e[r].title};a.push(i)},i=0;i<e.length;i++)r(i);return a}},{key:"handleClickedConfirm",value:function(){this.setState({paymentQuestion:!1}),sessionStorage.removeItem("chosenSlots"),this.setState({chosenSlots:[]}),this.setState({newOrdersListForRendering:""}),this.issueTickets()}},{key:"issueTickets",value:function(){for(var e=this,t=[],a=0;a<this.state.newOrdersListForTickets.length;a++){var n=U()({method:"post",url:"http://ec2-35-175-143-145.compute-1.amazonaws.com:4000/tickets",data:{hall_id:this.state.newOrdersListForTickets[a].hall_id,user_id:sessionStorage.getItem("user_id"),title:this.state.newOrdersListForTickets[a].event_title,from:this.state.newOrdersListForTickets[a].from,to:this.state.newOrdersListForTickets[a].to},headers:{ContentType:"application/x-www-form-urlencoded",Authorization:sessionStorage.getItem("token")}});t.push(n)}Promise.all(t).then(function(){return e.setState({newOrdersListForTickets:""})}).then(function(){window.location.reload()}).catch(function(e){console.log(e),console.log(e.message)})}},{key:"deleteTicket",value:function(e){var t=this,a=e.target.id,n=this.state.priorOrdersList[a];U()({method:"delete",url:"http://ec2-35-175-143-145.compute-1.amazonaws.com:4000/tickets/".concat(n._id),headers:{ContentType:"application/x-www-form-urlencoded",Authorization:sessionStorage.getItem("token")}}).then(function(){var e=t.state.priorOrdersList;e.splice(a,1),t.setState({priorOrdersList:e});var n=t.state.priorOrdersListForRendering;n.splice(a,1),t.setState({priorOrdersListForRendering:n})}).then(function(){window.location.reload()}).catch(function(e){return console.log(e)})}},{key:"editTicket",value:function(e){var t=this,a=e.target.id;return new Promise(function(e){e(a)}).then(function(e){return t.setState({alteredTicketIndex:e}),e}).then(function(e){return e}).then(function(e){t.setState({titleToEdit:t.state.priorOrdersListForRendering[e].event}),t.setState({fromToEdit:t.state.priorOrdersListForRendering[e].from}),t.setState({untilToEdit:t.state.priorOrdersListForRendering[e].to}),t.setState({newFrom:String(new Date(t.state.priorOrdersList[t.state.alteredTicketIndex].from+108e5).toISOString()).slice(0,-8)}),t.setState({newTo:String(new Date(t.state.priorOrdersList[t.state.alteredTicketIndex].to+108e5).toISOString()).slice(0,-8)}),t.setState({newTitle:t.state.priorOrdersList[t.state.alteredTicketIndex].title})}).then(function(){t.setState({editReservation:!0})}).catch(function(e){return console.log(e)})}},{key:"sendEditedTicket",value:function(){var e=this;U()({method:"put",url:"http://ec2-35-175-143-145.compute-1.amazonaws.com:4000/ticket/".concat(this.state.priorOrdersList[this.state.alteredTicketIndex]._id),headers:{ContentType:"application/x-www-form-urlencoded",Authorization:sessionStorage.getItem("token")},data:{title:this.state.newTitle,from:Date.parse(this.state.newFrom),to:Date.parse(this.state.newTo)}}).then(function(){e.setState({titleToEdit:""}),e.setState({fromToEdit:""}),e.setState({untilToEdit:""}),e.setState({newTitle:null}),e.setState({newFrom:null}),e.setState({newTo:null}),e.setState({alteredTicketIndex:null})}).then(function(){return window.location.reload()}).catch(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){var e=this;Promise.all([U.a.get("http://ec2-35-175-143-145.compute-1.amazonaws.com:4000/halls"),U.a.get("http://ec2-35-175-143-145.compute-1.amazonaws.com:4000/tickets")]).then(function(t){e.setState({halls:t[0].data.halls}),e.setState({tickets:t[1].data})}).then(function(){e.calculateSlotsReserved()}).then(function(){var t=[],a=sessionStorage.getItem("user_id");(t=e.state.tickets.filter(function(e){return e.user_id===a})).length>0&&e.setState({priorOrdersList:t.reverse()})}).then(function(){e.state.priorOrdersList.length>0&&e.setState({priorOrdersListForRendering:e.convertPriorOrdersToRender(e.state.priorOrdersList)})}).then(function(){e.setState({displayDayCards:!0})}).catch(function(e){return console.log(e)}),null!==sessionStorage.getItem("chosenSlots")&&this.setState({chosenSlots:JSON.parse(sessionStorage.getItem("chosenSlots"))})}},{key:"redirect",value:function(){this.props.history.push("/login")}},{key:"handleDateInput",value:function(){var e=this,t=new Date(new Date(new Date(new Date((new Date).setHours(0)).setMinutes(0)).setSeconds(0)).setMilliseconds(0)),a=new Date(this.state.dateInput);if(a<t)alert("The searched date cannot be erenow "),this.setState({dateInput:""});else{if(a.getDate()===t.getDate())return this.setState({backwardClick:"inactive"}),new Promise(function(e){e(a)}).then(function(t){return e.setState({dayChosen:t})}).then(function(){return e.calculateSlotsReserved()});if(a>t)return this.setState({backwardClick:"active"}),new Promise(function(e){e(a)}).then(function(t){return e.setState({dayChosen:t})}).then(function(){return e.calculateSlotsReserved()})}}},{key:"controlDateInput",value:function(e){this.setState({dateInput:e})}},{key:"handleDayChange",value:function(e){this.setState({dateInput:""}),e?this.renderDayCard("forth"):this.renderDayCard("back")}},{key:"render",value:function(){var e=this;return"string"===typeof sessionStorage.getItem("LoggedIn")&&sessionStorage.getItem("LoggedIn").length>2?r.a.createElement("div",{className:this.state.myClasses.main},r.a.createElement(Fe,{history:this.props.history,date:this.initialRenderDayCard().date,handleDateInput:this.handleDateInput.bind(this),handleDayChange:this.handleDayChange.bind(this),dateInput:this.state.dateInput,back:this.state.backwardClick,controlDateInput:this.controlDateInput.bind(this)}),r.a.createElement("div",{style:this.state.myClasses.title},r.a.createElement("div",null,r.a.createElement("h1",{className:"ui header",style:{color:"inherit"}},"Conference Venue Booking"))),r.a.createElement("div",{className:"manual"},r.a.createElement("div",null,r.a.createElement("p",{className:"manual-par"},r.a.createElement("b",null,'9"')," means ",r.a.createElement("b",null,"9:00-10:00"),'; 10" means 10:00-11:00.'),r.a.createElement("p",{className:"manual-par"},"Once you have selected all the rooms you would like to book click ",r.a.createElement("b",null,"payment")," button")),r.a.createElement("div",null,r.a.createElement("div",{className:"manual-div"},r.a.createElement(L,null),"  ",r.a.createElement("span",{className:"manual-par"}," The red room is ",r.a.createElement("b",null,"free")," at this time ")),r.a.createElement("div",{className:"manual-div"},r.a.createElement(T,null)," ",r.a.createElement("span",{className:"manual-par"}," The red room is ",r.a.createElement("b",null,"reserved")," at this time ")),r.a.createElement("div",{className:"manual-div"},r.a.createElement(_,null)," ",r.a.createElement("span",{className:"manual-par"}," The red room is ",r.a.createElement("b",null,"selected")," at this time, but ",r.a.createElement("b",null,"not reserved")," yet. ")))),this.state.displayDayCards?this.initialRenderDayCard(this.chosenSlot).card:r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",paddingTop:"3em"}},r.a.createElement(Q,null)),this.state.priorOrdersListForRendering.length>0?r.a.createElement("div",{className:"ui container",style:{color:"#945600",border:"1em solid #2185D0",background:"#E8F1F2",borderRadius:"2em",marginBottom:"2em",marginTop:"2em",fontSize:"1.2em"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement("h3",{style:{color:"#945600",marginTop:"1em"}},"LIST OF YOUR PRIOR RESERVATIONS:")),r.a.createElement("div",{style:{marginLeft:"1em"}},this.state.priorOrdersListForRendering.map(function(t,a){return r.a.createElement("div",{key:a,style:{marginTop:"1em",color:"#13293D",fontFamily:'Arial, "Helvetica Neue", Helvetica, sans-serif',fontSize:"1em",display:"flex",flexDirection:"column",alignItems:"stretch"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between"}},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"HALL:"),r.a.createElement("td",null,t.hall_title)),r.a.createElement("tr",null,r.a.createElement("td",null,"EVENT:"),r.a.createElement("td",null,t.event)),r.a.createElement("tr",null,r.a.createElement("td",null,"FROM:"),r.a.createElement("td",null,t.from)),r.a.createElement("tr",null,r.a.createElement("td",null,"TO:"),r.a.createElement("td",null,t.to)))),r.a.createElement("div",{style:{marginRight:"1em"}},r.a.createElement("button",{className:"ui olive button",id:a,onClick:function(t){return e.editTicket(t)},style:{marginRight:"1em",marginBottom:"1em"}},"EDIT"),r.a.createElement("button",{id:a,className:"ui red button",onClick:function(t){return e.deleteTicket(t)}},"DELETE"))))}))):null,this.state.editReservation?r.a.createElement("div",{className:"ui fluid container",style:{position:"fixed",background:"linear-gradient(0deg, rgba(9,9,121,1) 0%, rgba(63,81,181,1) 50%, rgba(33,33,105,0.9654236694677871) 100%)",color:"white",top:"2em",padding:"2em",marginRight:"2em",marginLeft:"2em",overflowY:"auto",overflowX:"auto",maxHeight:"90%",maxWidth:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",flexWrap:"wrap"}},r.a.createElement("div",null,r.a.createElement("h3",null,"INPUT DATA YOU WISH TO AMEND. DISREGARD INPUTS YOU DON'T INTEND TO ALTER.")),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",color:"white",alignItems:"center",flexWrap:"wrap",marginBottom:"2em"}},r.a.createElement("div",{style:{paddingTop:"0.5em",marginRight:"1em"}},"EVENT TITLE:"),r.a.createElement("div",null,this.state.titleToEdit),r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:this.state.newTitle,size:"21",style:{border:0,padding:"0.5em",borderRadius:"1em",margin:"1em"},onChange:function(t){return e.setState({newTitle:t.target.value})}}))),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",color:"white",alignItems:"center",flexWrap:"wrap",marginBottom:"2em"}},r.a.createElement("div",{style:{paddingTop:"0.5em",marginRight:"1em"}},"COMMENCES at:"),r.a.createElement("div",null,this.state.fromToEdit),r.a.createElement("div",null,r.a.createElement("input",{type:"datetime-local",placeholder:"Disregard to keep unaltered",size:"21",style:{border:0,padding:"0.5em",borderRadius:"1em",margin:"1em"},value:this.state.newFrom,min:String((new Date).toISOString()).slice(0,-8),onChange:function(t){var a=t.target.value,n=Date.parse(a),r=Date.parse(e.state.newTo);if(n>r){var i=String(new Date(new Date(n+108e5).setMinutes(59)).toISOString()).slice(0,-8);e.setState({newTo:i})}else if(n<r&&n+354e4>r){var o=String(new Date(new Date(n+108e5).setMinutes(59)).toISOString()).slice(0,-8);e.setState({newTo:o})}e.setState({newFrom:a})},required:!0}))),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",color:"white",alignItems:"center",flexWrap:"wrap",marginBottom:"2em"}},r.a.createElement("div",{style:{paddingTop:"0.5em",marginRight:"1em"}},"TERMINATES at:"),r.a.createElement("div",null,this.state.untilToEdit),r.a.createElement("div",null,r.a.createElement("input",{type:"datetime-local",placeholder:"Disregard to keep unaltered",size:"21",style:{border:0,margin:"1em",padding:"0.5em",borderRadius:"1em"},min:String((new Date).toISOString()).slice(0,-8),value:this.state.newTo,onChange:function(t){var a=t.target.value,n=Date.parse(a),r=Date.parse(e.state.newFrom);if(e.setState({newTo:t.target.value}),n<r)if("0"===String(a).slice(8,9)||"0"===String(a).slice(-5,-4))setTimeout(function(){var t=Date.parse(e.state.newTo);if(t<Date.parse(e.state.newFrom)){var a=String(new Date(new Date(t+108e5).setMinutes(0)).toISOString()).slice(0,-8);console.log(a),e.setState({newFrom:a})}},1e3);else{var i=String(new Date(new Date(n+108e5).setMinutes(0)).toISOString()).slice(0,-8);e.setState({newFrom:i})}},required:!0}))),r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap",alignItems:"center",marginBottom:"2em"}},r.a.createElement("button",{className:"edit-button ui purple button",style:{background:"#574AE2"},onClick:function(t){return Date.parse(e.state.newFrom)<Date.parse(new Date)?(t.preventDefault(),alert("NEW DATE CANNOT BE IN THE PAST!"),null):e.state.newTo<e.state.newFrom?(alert("TERIMNATION TIME CANNOT BE BEFORE COMMENCEMENT!"),null):(e.sendEditedTicket(),void e.setState({editReservation:!1}))}},r.a.createElement("span",{className:"button-text"},"Confirm")),r.a.createElement("button",{className:"edit-button ui button",style:{background:"#222A68",color:"white"},onClick:function(){e.setState({editReservation:!1})}},r.a.createElement("span",{className:"button-text"}," Cancel")))):null,this.state.paymentQuestion?r.a.createElement("div",{className:"ui fluid container",style:{position:"fixed",background:"#E8F1F2",color:"#13293D",top:"2em",padding:"2em",marginRight:"2em",marginLeft:"2em",borderRadius:"1em",overflowY:"auto",maxHeight:"90%",border:"1em solid #2185D0"}},r.a.createElement("h2",{style:{color:"#945600"}},"Please enter a title of the event for each reservation prior to order confirmation."),this.state.newOrdersListForRendering.map(function(t,a){return r.a.createElement("div",{key:a,style:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",width:"50%"}},r.a.createElement("p",null,"HALL: ",e.state.newOrdersListForRendering[a].hall_title," ",r.a.createElement("br",null),"FROM: ",e.state.newOrdersListForRendering[a].from," ",r.a.createElement("br",null),"TO: ",e.state.newOrdersListForRendering[a].to),r.a.createElement("div",{className:"ui input"},r.a.createElement("input",{type:"text",placeholder:"Event title",style:{background:"#E8F1F2",color:"#13293D",border:"0.1em solid #2185D0",lineHeight:"18px"},onChange:function(t){var n=e.state.newOrdersListForTickets;n[a].event_title=t.target.value,e.setState({newOrdersListForTickets:n})}})))}),r.a.createElement("h3",{style:{color:"#945600"}},"Once you entitled each of the events, please confirm the order for its processing."),r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"}},r.a.createElement("button",{className:"ui primary button",onClick:function(){e.handleClickedConfirm()}},"Confirm"),r.a.createElement("button",{className:"ui button",onClick:function(){e.setState({paymentQuestion:!1})}},"Cancel"))):null,this.state.halls.length>0?r.a.createElement("div",{style:{display:"flex",flexDirection:"row",flexFlow:"wrap",justifyConter:"space-between"}},this.state.halls.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(ie,{image:t.imageURL,title:t.title,description:t.description,cssClass:"".concat(e.state.colours[a],"-hall")}))})):null):r.a.createElement(l.a,{to:"/login"})}}]),t}(n.Component),He=a(59),Be=a.n(He),_e=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",confirmPass:"",passwordInputType:"password",errorDisplay:"none",errorValue:""},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleEmailChange",value:function(e){return"block"===this.state.errorDisplay&&(this.setState({errorDisplay:"none"}),this.setState({errorValue:""})),this.setState({email:e.target.value})}},{key:"handlePasswordChange",value:function(e){return"block"===this.state.errorDisplay&&(this.setState({errorDisplay:"none"}),this.setState({errorValue:""})),this.setState({password:e.target.value})}},{key:"handlePasswordConfirmationChange",value:function(e){return"block"===this.state.errorDisplay&&(this.setState({errorDisplay:"none"}),this.setState({errorValue:""})),this.setState({confirmPass:e.target.value})}},{key:"handleCheckboxClick",value:function(e){return e.target.checked?this.setState({passwordInputType:"text"}):this.setState({passwordInputType:"password"})}},{key:"handleSubmit",value:function(e){var t=this;this.state.confirmPass!==this.state.password?(e.preventDefault(),this.setState({errorDisplay:"block"}),this.setState({errorValue:"You password and confirmation password do not match"})):(e.preventDefault(),U.a.post("http://ec2-35-175-143-145.compute-1.amazonaws.com:4000/signUp",{headers:{"Content-Type":"application/x-www-form-urlencoded"}},{data:{email:this.state.email,password:this.state.password}}).then(function(e){t.props.history.push("/login")}).catch(function(e){"Request failed with status code 500"===e.message&&(t.setState({errorDisplay:"block"}),t.setState({errorValue:"This email is already registered. Enter a unique one."}),t.setState({email:""}),setTimeout(function(){t.setState({errorDisplay:"none"}),t.setState({errorValue:""})},3e3))}))}},{key:"render",value:function(){if("string"!==typeof sessionStorage.getItem("LoggedIn")){var e=this.props.classes;return r.a.createElement("main",{className:e.main},r.a.createElement(he.a,null),r.a.createElement(Ce.a,{className:e.paper},r.a.createElement("form",{className:e.container,autoComplete:"off"},r.a.createElement("p",{style:{fontSize:"1.25em"}},"CREATE YOUR ACCOUNT"),r.a.createElement(Be.a,{id:"outlined-email-input",label:"Email",className:e.textField,type:"email",name:"email",autoComplete:"email",margin:"normal",variant:"outlined",onChange:this.handleEmailChange.bind(this),value:this.state.email}),r.a.createElement(Be.a,{id:"outlined-password-input",label:"New password",className:e.textField,type:this.state.passwordInputType,autoComplete:"current-password",margin:"normal",variant:"outlined",onChange:this.handlePasswordChange.bind(this),value:this.state.password}),r.a.createElement(Be.a,{id:"outlined-password-confirm-input",label:"Confirm new password",className:e.textField,type:this.state.passwordInputType,autoComplete:"current-password",margin:"normal",variant:"outlined",onChange:this.handlePasswordConfirmationChange.bind(this),value:this.state.confirmPass}),r.a.createElement("div",{style:{marginRight:"15em"}},r.a.createElement(ye.a,{onClick:this.handleCheckboxClick.bind(this),value:"checkedB",color:"primary"}),r.a.createElement("span",null,"Show password")),r.a.createElement("div",{style:{height:"2em"}},r.a.createElement("div",{style:{color:"red",display:this.state.errorDisplay}},this.state.errorValue)),r.a.createElement(w.a,{type:"submit",variant:"contained",color:"primary",className:e.button,onClick:this.handleSubmit.bind(this)},"Create account")),r.a.createElement(s.b,{to:"/"},r.a.createElement("p",{style:{marginTop:"1.5em",color:"darkblue",textDecoration:"underline"}},"Return to Home page"))))}return alert("If you want to create a new account log out firstly."),r.a.createElement(l.a,{to:"/booking"})}}]),t}(r.a.Component),Pe=Object(p.withStyles)(function(e){return{main:Object(le.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"25em"},dense:{marginTop:16},menu:{width:200}}})(_e);a(308);var ze=function(){return r.a.createElement("div",null,r.a.createElement(s.a,{basename:void 0},r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/login",component:Re}),r.a.createElement(l.b,{path:"/",exact:!0,component:se}),r.a.createElement(l.b,{path:"/booking",component:Me}),r.a.createElement(l.b,{path:"/signup",component:Pe}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ze,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},70:function(e,t,a){},99:function(e,t,a){}},[[126,1,2]]]);
//# sourceMappingURL=main.1fb41db5.chunk.js.map